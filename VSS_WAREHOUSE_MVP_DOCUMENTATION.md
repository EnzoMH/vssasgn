# 🏢 VSS 창고 관리 시스템 MVP

## 📋 프로젝트 개요

AI 기반 창고 관리 시스템으로, 입출고 데이터 분석, 실시간 대시보드, RAG 기반 AI 챗봇, CAD 파일 분석 등을 제공하는 통합 솔루션입니다.

## 🏗️ 시스템 아키텍처

### 전체 시스템 구조

```
┌─────────────────────────────────────────────────────────────────┐
│                        Frontend Layer                          │
├─────────────────────────────────────────────────────────────────┤
│  • HTML/CSS/JavaScript (Vanilla JS)                           │
│  • Chart.js (데이터 시각화)                                      │
│  • Tab 기반 UI (재고현황, 트렌드분석, AI 채팅, CAD 뷰어, ML 클러스터링)  │
│  • 실시간 KPI 대시보드                                           │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                         API Layer                              │
├─────────────────────────────────────────────────────────────────┤
│  • FastAPI (Python 웹 프레임워크)                                │
│  • RESTful API 엔드포인트                                        │
│  • CORS 미들웨어                                                │
│  • 정적 파일 서빙                                               │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Backend Services                          │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   Data Service  │  │   AI Service    │  │  Vector DB      │  │
│  │                 │  │                 │  │   Service       │  │
│  │ • 데이터 로드     │  │ • Gemini API    │  │ • ChromaDB      │  │
│  │ • KPI 계산       │  │ • Rate Limiter  │  │ • RAG 시스템     │  │
│  │ • 통계 분석       │  │ • 멀티 모델      │  │ • 임베딩 생성    │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   CAD Service   │  │   LOI Service   │  │ ML/Analytics    │  │
│  │                 │  │                 │  │   Service       │  │
│  │ • DWG/DXF 분석   │  │ • 위치 정보      │  │ • XGBoost      │  │
│  │ • 도면 시각화     │  │ • 랙 관리        │  │ • K-Means      │  │
│  │ • AI 기반 해석   │  │ • 공간 분석      │  │ • 이상 감지     │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        Data Layer                              │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │    Raw Data     │  │   Vector DB     │  │   ML Models     │  │
│  │                 │  │                 │  │                 │  │
│  │ • CSV/Excel     │  │ • ChromaDB      │  │ • 훈련된 모델    │  │
│  │ • 입고 데이터    │  │ • 벡터 임베딩    │  │ • 클러스터 결과  │  │
│  │ • 출고 데이터    │  │ • 메타데이터     │  │ • 특성 추출기    │  │
│  │ • 상품 마스터    │  │                 │  │                 │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

## 🔧 기술 스택

### Backend

- **Framework**: FastAPI
- **Language**: Python 3.8+
- **AI/ML**:
  - Gemini API (Google Generative AI)
  - scikit-learn
  - XGBoost
  - ChromaDB + SentenceTransformers
- **Data Processing**: Pandas, NumPy
- **Visualization**: Matplotlib, Seaborn
- **CAD Processing**: ezdxf, OpenCV, Pillow

### Frontend

- **Languages**: HTML5, CSS3, JavaScript (ES6+)
- **Libraries**: Chart.js
- **UI Framework**: Custom Tab-based Interface
- **Icons**: Font Awesome

### Database & Storage

- **Vector Database**: ChromaDB (로컬 지속성)
- **File Storage**: 로컬 파일 시스템
- **Data Formats**: CSV, Excel, JSON

## 📊 주요 기능

### 1. 실시간 대시보드

```
KPI 모니터링:
├── 총 재고량 (Total Inventory)
├── 일일 처리량 (Daily Throughput)
├── 랙 활용률 (Rack Utilization)
└── 재고 회전율 (Inventory Turnover)

차트 시각화:
├── 랙별 재고 현황 (Bar Chart)
├── 제품 카테고리 분포 (Pie Chart)
└── 일별 입출고 트렌드 (Line Chart)
```

### 2. AI 챗봇 (RAG 시스템)

```
질의 처리 플로우:
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   사용자 질문   │───▶│   CoT 분석      │───▶│   처리 방식     │
│                 │    │                 │    │   결정          │
│ "주요 공급사는?" │    │ • 의미론적 분석  │    │ • 직접 계산     │
│ "A랙에 뭐가?"   │    │ • 키워드 매칭    │    │ • 벡터 검색     │
│ "총 재고량은?"  │    │ • 복잡도 판단    │    │ • 일반 LLM      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                                      │
                                                      ▼
                               ┌─────────────────────────────────────┐
                               │          응답 생성               │
                               ├─────────────────────────────────────┤
                               │ • VectorDB 검색 + LLM 생성        │
                               │ • 구조화된 컨텍스트 제공           │
                               │ • 정확한 데이터 기반 답변          │
                               └─────────────────────────────────────┘
```

### 3. CAD 파일 분석

```
CAD 처리 파이프라인:
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ DWG/DXF     │───▶│ ezdxf 파싱  │───▶│ 이미지 변환  │───▶│ AI 분석     │
│ 파일 업로드  │    │             │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
                                                              │
                                                              ▼
                                   ┌─────────────────────────────────────┐
                                   │        결과 출력                 │
                                   ├─────────────────────────────────────┤
                                   │ • 도면 정보 추출                 │
                                   │ • 공간 분석                     │
                                   │ • 웹 시각화                     │
                                   └─────────────────────────────────────┘
```

### 4. ML 기반 분석

```
Machine Learning 모델:
├── 수요 예측 (Demand Prediction)
│   └── XGBoost Regressor
├── 상품 클러스터링 (Product Clustering)
│   └── K-Means + PCA
└── 이상 감지 (Anomaly Detection)
    └── Isolation Forest
```

## 🔄 데이터 플로우

### 1. 데이터 수집 및 전처리

```
Raw Data Sources:
├── 입고데이터_YYYYMMDD.xlsx (7일분)
├── 출고데이터_YYYYMMDD.xlsx (7일분)
└── 상품데이터.xlsx / product_data.csv

전처리 과정:
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Excel/CSV     │───▶│   데이터 정제    │───▶│   통합 데이터    │
│   파일 로드      │    │                 │    │   구조 생성      │
│                 │    │ • 컬럼명 통일    │    │                 │
│ • 다중 파일     │    │ • 타입 변환      │    │ • 표준화된 형식  │
│ • 다양한 형식   │    │ • 결측치 처리    │    │ • 관계 정의      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 2. RAG 시스템 데이터 플로우

```
벡터화 과정:
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   구조화 데이터  │───▶│   자연어 변환    │───▶│   벡터 임베딩    │
│                 │    │                 │    │                 │
│ • 입고 기록     │    │ "농심에서 신라면  │    │ • SentenceT5    │
│ • 출고 기록     │    │  5개 파레트 입고" │    │ • 768차원 벡터   │
│ • 상품 정보     │    │                 │    │ • ChromaDB 저장  │
└─────────────────┘    └─────────────────┘    └─────────────────┘

검색 과정:
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   사용자 질문    │───▶│   유사도 검색    │───▶│   컨텍스트 생성  │
│                 │    │                 │    │                 │
│ "주요 공급사는?" │    │ • 의미적 유사도  │    │ • 관련 문서 추출 │
│                 │    │ • Top-K 검색     │    │ • 메타데이터 집계│
│                 │    │ • 메타데이터 필터│    │ • 구조화된 답변  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 🚀 API 엔드포인트

### Dashboard APIs

```
GET  /api/dashboard/kpi              # KPI 데이터 조회
GET  /api/inventory/by-rack          # 랙별 재고 현황
GET  /api/trends/daily               # 일별 트렌드 데이터
GET  /api/product/category-distribution  # 카테고리 분포
```

### AI & Vector DB APIs

```
POST /api/ai/chat                    # AI 챗봇 대화
GET  /api/vector-db/status           # 벡터 DB 상태 확인
POST /api/vector-db/reindex          # 벡터 DB 재인덱싱
```

### ML & Analytics APIs

```
GET  /api/ml/product-clustering/status     # 클러스터링 상태
GET  /api/ml/product-clustering/clusters   # 클러스터 결과
GET  /api/ml/product-clustering/high-turnover  # 높은 회전율 상품
```

### CAD & File APIs

```
POST /api/cad/upload                 # CAD 파일 업로드
POST /api/cad/analyze               # CAD 파일 분석
```

## 💡 핵심 혁신 요소

### 1. Chain of Thought (CoT) 기반 질의 분석

```python
질문 분류 로직:
┌─────────────────────────────────────────────────────────────┐
│ 1단계: 기본 키워드 필터링 (성능 최적화)                      │
│ 2단계: 간단한 패턴 기반 사전 필터링                          │
│ 3단계: CoT 기반 의미론적 분석 (복잡한 케이스)                │
│ 4단계: LLM 기반 최종 판단 및 라우팅                         │
└─────────────────────────────────────────────────────────────┘

예시:
"주요 공급사는?"
→ CoT 분석: "복합 검색 필요, 업체 목록 및 순위 조회"
→ 벡터 검색 + 메타데이터 집계 + LLM 답변 생성
```

### 2. 하이브리드 데이터 처리

```
정형 데이터 + 비정형 분석:
├── 직접 계산: SQL/Pandas (90% - 단순 집계)
├── 벡터 검색: ChromaDB (8% - 복합 질의)
└── 일반 LLM: Gemini (2% - 설명/해석)
```

### 3. 실시간 적응형 UI

```
Tab 기반 모듈화:
├── Browser Mode: 전체 대시보드 뷰
└── Tab Mode: 기능별 세분화 뷰
    ├── 재고현황 (Inventory)
    ├── 트렌드분석 (Trends)
    ├── AI 채팅 (AI Chat)
    ├── CAD 뷰어 (CAD Viewer)
    └── ML 클러스터링 (ML Clustering)
```

## 📈 성능 특성

### 응답 시간

- **직접 계산**: ~100ms
- **벡터 검색**: ~500ms
- **CAD 분석**: ~2-5초
- **ML 클러스터링**: ~1-3초

### 확장성

- **수평 확장**: ChromaDB 분산 가능
- **모델 확장**: 다중 Gemini API 키 지원
- **데이터 확장**: 파일 기반 무제한 확장

## 🔒 보안 및 안정성

### Rate Limiting

```python
API 키별 제한:
├── RPM: 2,000 requests/minute
├── TPM: 4,000,000 tokens/minute
└── 버스트: 100 requests (순간)
```

### Fallback 메커니즘

```
다층 Fallback 구조:
├── API 실패 → 다른 API 키 시도
├── 벡터 검색 실패 → 일반 LLM 처리
├── 데이터 로드 실패 → 더미 데이터 제공
└── 전체 시스템 실패 → 정적 응답
```

## 🎯 MVP 목표 달성도

### ✅ 완료된 기능

- [x] 실시간 대시보드 및 KPI 모니터링
- [x] RAG 기반 AI 챗봇 (CoT 적용)
- [x] CAD 파일 분석 및 시각화
- [x] ML 기반 상품 클러스터링
- [x] 벡터 데이터베이스 통합
- [x] 다중 모달 UI (Tab/Browser Mode)

### 🔄 개선 중인 기능

- [ ] 실시간 데이터 동기화
- [ ] 고급 이상 감지 알고리즘
- [ ] 모바일 반응형 UI
- [ ] 사용자 권한 관리

### 🚀 향후 확장 계획

- [ ] 멀티테넌트 지원
- [ ] 클라우드 배포 자동화
- [ ] 고급 예측 모델 추가
- [ ] 실시간 알림 시스템

---

**개발 기간**: 2024.08 - 2025.01  
**기술 스택**: Python + FastAPI + ChromaDB + Gemini API + Chart.js  
**라이센스**: 내부 사용  
**버전**: MVP v1.0
